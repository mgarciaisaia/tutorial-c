
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Rutas Argentinas - C para Operativos</title>
  <meta name="author" content="mgarciaisaia">

  
  <meta name="description" content="Más de una vez hemos puesto rutas absolutas en nuestro código, porque es común no entender cómo funcionan las rutas absolutas dentro de un programa. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mgarciaisaia.github.io/tutorial-c/blog/2015/04/23/rutas-argentinas">
  <link href="/tutorial-c/favicon.png" rel="icon">
  <link href="/tutorial-c/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/tutorial-c/atom.xml" rel="alternate" title="C para Operativos" type="application/atom+xml">
  <script src="/tutorial-c/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/tutorial-c/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<link rel="stylesheet" href="/tutorial-c/stylesheets/gh-fork-ribbon.css" />
<!--[if IE]>
<link rel="stylesheet" href="/tutorial-c/stylesheets/gh-fork-ribbon.ie.css" />
<![endif]-->

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-59960325-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/tutorial-c/">C para Operativos</a></h1>
  
    <h2>Aprendiendo C para una cursada feliz de Sistemas Operativos</h2>
  
  </hgroup>

<div class="github-fork-ribbon-wrapper right">
	<div class="github-fork-ribbon">
		<a href="https://github.com/mgarciaisaia/octopress">¡Forkeame!</a>
	</div>
</div>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/tutorial-c/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mgarciaisaia.github.io/tutorial-c" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/tutorial-c/">Blog</a></li>
  <li><a href="/tutorial-c/blog/archives">Archives</a></li>
  <li><a href="/tutorial-c/lo-c-tutto/">Lo C Tutto</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Rutas Argentinas</h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-04-23T01:40:00-03:00" pubdate data-updated="true">Apr 23<span>rd</span>, 2015</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>Más de una vez hemos puesto rutas absolutas en nuestro código, porque es común no entender cómo funcionan las rutas absolutas dentro de un programa.<!-- more --></p>

<h2>Current working directory</h2>

<p>Cuando ejecutamos un proceso, éste se ejecuta con un directorio de trabajo asociado (el <em>current working directory</em>, que le llaman). La idea es marcar un directorio como el &ldquo;actual&rdquo; en que se encuentra ese proceso. Desde el programa podemos acceder a ese valor usando la función <a href="http://linux.die.net/man/3/getcwd"><code>getcwd()</code></a>:</p>

<figure class='code'><figcaption><span>cwd.c </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#include &lt;stdio.h&gt;</span>
</span><span class='line'><span class="cp">#include &lt;unistd.h&gt;</span>
</span><span class='line'><span class="cp">#include &lt;stdlib.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kt">char</span> <span class="o">*</span><span class="n">current_dir</span> <span class="o">=</span> <span class="n">getcwd</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;El directorio actual es %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">current_dir</span><span class="p">);</span>
</span><span class='line'>  <span class="n">free</span><span class="p">(</span><span class="n">current_dir</span><span class="p">);</span>
</span><span class='line'>  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Compilemos y ejecutemos:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>utnso@utnso40:~<span class="nv">$ </span><span class="nb">pwd</span>
</span><span class='line'>/home/utnso
</span><span class='line'>utnso@utnso40:~<span class="nv">$ </span>gcc -Wall cwd.c -o cwd
</span><span class='line'>utnso@utnso40:~<span class="nv">$ </span>./cwd
</span><span class='line'>El directorio actual es /home/utnso
</span><span class='line'>utnso@utnso40:~<span class="nv">$ </span><span class="nb">cd</span> /etc/
</span><span class='line'>utnso@utnso40:/etc<span class="nv">$ </span>~/cwd
</span><span class='line'>El directorio actual es /etc
</span><span class='line'>utnso@utnso40:/etc<span class="err">$</span>
</span></code></pre></td></tr></table></div></figure>


<p>Por defecto, al iniciar un proceso desde la consola, el directorio de trabajo actual es el directorio en que estábamos cuando ejecutamos el proceso. Existe, también, <a href="http://linux.die.net/man/2/chdir"><code>chdir</code></a>, para cambiar el directorio de trabajo actual, pero se va del scope de este post su uso.</p>

<h2>Rutas relativas</h2>

<p>Y si el CWD nos interesa, eso es porque los paths relativos se resuelven a partir del directorio actual del proceso. De <a href="http://linux.die.net/man/2/path_resolution"><code>man path_resolution</code></a>:</p>

<blockquote><p>If the pathname does not start with the &lsquo;/&rsquo; character, the starting lookup directory of the resolution process is the current working directory of the process. (This is also inherited from the parent. It can be changed by use of the <code>chdir(2)</code> system call.)</p>

<p>Pathnames starting with a &lsquo;/&rsquo; character are called absolute pathnames. Pathnames not starting with a &lsquo;/&rsquo; are called relative pathnames.</p></blockquote>

<p>Entonces, si, por ejemplo, a una syscall como <code>open</code> le paso el path <code>archivo.log</code>, <code>open</code> va a abrir el archivo llamado <code>archivo.log</code> ubicado en el directorio actual de nuestro proceso. Este <em>no necesariamente</em> es el mismo directorio desde el que ejecutamos el proceso (porque pudo haber hecho un <code>chdir</code>), pero por lo general sí lo va a ser.</p>

<h2>eclipse</h2>

<p>Pero más de una vez nos pasa que, trabajando con eclipse, los path relativos se resuelven bien ejecutando nuestro proceso desde eclipse, pero falla cuando lo ejecutamos desde la consola.</p>

<p>El problema, acá, es el CWD en cada caso.</p>

<p>Cuando vamos a ejecutar desde la consola, por lo general vamos al directorio <code>Debug/</code> que contiene nuestro ejecutable, y le damos <code>./miEjecutable</code> para correrlo. En ese caso, el CWD es nuestro directorio <code>Debug/</code>, y todas las rutas relativas se resuelven a partir de allí.</p>

<p>Pero eclipse no hace eso, o al menos no por defecto. Si vamos a las Run Configurations de eclipse (Run &ndash;> Run configurations&hellip;) y seleccionamos la de algún proyecto que ya hayamos ejecutado, vamos a encontrar que la pestaña de Arguments es algo así:</p>

<p><img src="/tutorial-c/assets/eclipse-run-config-arguments.png" alt="Pestaña Arguments de las Run Configurations de eclipse" /></p>

<p>¡Ahí está! Abajo de todo dice que el working directory de nuestro proceso va a ser <code>${workspace_loc:NUESTRO_PROYECTO}</code>, que es la forma horrenda que tiene eclipse para decir <em>&ldquo;el directorio raíz del proyecto&rdquo;</em>. De hecho, si miramos la pestaña Main de las Run Configurations, podemos observar algo <em>raro</em> arriba de todo:</p>

<p><img src="/tutorial-c/assets/eclipse-run-config-main.png" alt="Pestaña Main de las Run Configurations de eclipse" /></p>

<p>Nuestra aplicación no es <code>coercion</code> (el nombre del proyecto al que le saqué la captura), si no <code>Debug/coercion</code>. <em>Ese</em> es el comando que eclipse &ldquo;va a ejecutar en la consola&rdquo;. Digamos, eclipse va a hacer una especie de <code>cd</code> al directorio que marca como Working directory, y desde ahí va a ejecutar lo que diga en el campo C/C++ Application.</p>

<p>Entonces, como nosotros desde la consola solemos <em>entrar a Debug</em> en lugar de ejecutar desde el directorio raíz del proyecto, ahí es donde aparecen las diferencias con las rutas relativas.</p>

<h2>Del otro lado del espejo</h2>

<p>Si quisieras seguir jugando, podrías ponerte a probar qué pasa si cambiás el comando de esa línea. ¿Podés ejecutar, por ejemplo, <code>ls</code>? ¿Podés ejecutar <code>cd</code>? ¿Podés pasarle los parámetros ahí? ¿Qué pasa cuando cambiás el working directory?</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">mgarciaisaia</span></span>

      








  


<time datetime="2015-04-23T01:40:00-03:00" pubdate data-updated="true">Apr 23<span>rd</span>, 2015</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="/tutorial-c//twitter.com/share" class="twitter-share-button" data-url="http://mgarciaisaia.github.io/tutorial-c/blog/2015/04/23/rutas-argentinas/" data-via="" data-counturl="http://mgarciaisaia.github.io/tutorial-c/blog/2015/04/23/rutas-argentinas/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="small"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/tutorial-c/blog/2015/02/27/dream-of-serialization/" title="Previous Post: Dream of Serialization">&laquo; Dream of Serialization</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Acerca de...</h1>
  <p>Pequeña introducción a C y otras herramientas necesarias para desarrollar el TP de Sistemas Operativos de la UTN FRBA</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/tutorial-c/blog/2015/04/23/rutas-argentinas/">Rutas Argentinas</a>
      </li>
    
      <li class="post">
        <a href="/tutorial-c/blog/2015/02/27/dream-of-serialization/">Dream of Serialization</a>
      </li>
    
      <li class="post">
        <a href="/tutorial-c/blog/2015/02/24/aprendiendo-c-con-gdb/">Aprendiendo C Con GDB</a>
      </li>
    
      <li class="post">
        <a href="/tutorial-c/blog/2015/02/19/aprendiendo-assembler-para-entender-c/">Aprendiendo Assembler Para Entender C</a>
      </li>
    
      <li class="post">
        <a href="/tutorial-c/blog/2015/02/07/between-a-rock-and-a-hard-link/">Between a Rock and a Hard Link</a>
      </li>
    
      <li class="post">
        <a href="/tutorial-c/blog/2014/12/26/int-vs-int32-t/">Int vs Int32_t</a>
      </li>
    
      <li class="post">
        <a href="/tutorial-c/blog/2014/12/26/compiladores-y-errores/">Compiladores Y Errores</a>
      </li>
    
      <li class="post">
        <a href="/tutorial-c/blog/2014/12/26/un-tutorial-rapido-para-implementar-y-debuggear-malloc/">Un Tutorial Rápido Para Implementar Y Debuggear Malloc, Free, Calloc Y Realloc</a>
      </li>
    
      <li class="post">
        <a href="/tutorial-c/blog/2014/09/04/p-sherman-calle-wallaby-42-sydney/">P. Sherman, Calle Wallaby 42, Sydney</a>
      </li>
    
      <li class="post">
        <a href="/tutorial-c/blog/2014/03/20/she-bangs-she-bangs/">She Bangs, She Bangs...</a>
      </li>
    
      <li class="post">
        <a href="/tutorial-c/blog/2013/12/31/me-di-cuenta-que-me-tiraste-la-senal/">Me Dí Cuenta Que Me Tiraste La Señal</a>
      </li>
    
      <li class="post">
        <a href="/tutorial-c/blog/2013/12/30/inotify/">Inotify</a>
      </li>
    
      <li class="post">
        <a href="/tutorial-c/blog/2013/10/21/bajando-el-nivel/">Bajando El Nivel</a>
      </li>
    
      <li class="post">
        <a href="/tutorial-c/blog/2013/08/20/variables/">Variables</a>
      </li>
    
      <li class="post">
        <a href="/tutorial-c/blog/2013/08/19/arrancando/">Arrancando</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/sisoputnfrba">@sisoputnfrba</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'sisoputnfrba',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/tutorial-c/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - mgarciaisaia -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'tutorialc';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://mgarciaisaia.github.io/tutorial-c/blog/2015/04/23/rutas-argentinas/';
        var disqus_url = 'http://mgarciaisaia.github.io/tutorial-c/blog/2015/04/23/rutas-argentinas/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
